/*
  Сервис работы с камерами
*/
syntax = "proto3";

import "google/protobuf/descriptor.proto";
import "entity_feature/feature.proto";
import "impl/baseapi/spec.proto";

package post.v1;

// Сущность
message Post {
  option (impl.base.api.specification) = {
    service_set: {
      serverside_entity_crud:{
        http_root: "post/api/v1/post"
        method_set: {
          get_list:{}
          get_by_id:{}
          save_create_replace:{
            response_template:{entity_saving_error:{}}
          }
        }
      }
    }
  };
  // Идентификатор
  string uid = 1 [(entity.feature.unique_field_group) = PK];
  // Наименование
  string name = 2;
  // Тип
  string type = 3;
  // Ошибка сохранения
  message SavingError {
    // Конфликт версий.
    // Причины:
    // - В базе хранится другая версия строки, значения changed_at отличаются
    message Conflict {}
    // Причина ошибки
    oneof reason {
      // Конфликт версий
      Conflict conflict = 1;
    }
  }
}

// Фильтр
message PostFilter {
  repeated string types = 1;
}