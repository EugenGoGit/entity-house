syntax = "proto3";

import "impl.api.dto.proto";
import "entity.feature.api.method.proto";

package impl.api.method;

// todo: сделать имплементацию на абстрактном методе. Или не надо. или как пример
// TODO: чем методы отличаются? сделать различие в полях. На основе заполненности опций
message SaveCreateReplace {
  entity.feature.api.method.OverrideAttributes override_attributes = 1;
  entity.feature.api.method.Attributes attributes = 2;
  dto.RequestTemplate request_template = 3;
  dto.ResponseTemplate response_template = 4;
  entity.feature.api.method.Variables variables = 5;
}

//message SaveListCreateReplace {
//  option (entity.feature.api.method.name) = "Save{EntityTypeName}List";
//  option (entity.feature.api.method.request_name) = "Save{EntityTypeName}ListRequest";
//  option (entity.feature.api.method.response_name) = "Save{EntityTypeName}ListResponse";
//
//  option (entity.feature.api.method.http_rule) = {
//    post: "/{HttpRoot}/list",
//    body: "*"
//  };
//  option (entity.feature.api.method.key_field_behavior) = FIELD_BEHAVIOR_UNSPECIFIED;
//}

//message SaveCreateOnly {
//  option (entity.feature.api.method.name) = "Save{EntityTypeName}";
//  option (entity.feature.api.method.request_name) = "Save{EntityTypeName}Request";
//  option (entity.feature.api.method.response_name) = "Save{EntityTypeName}Response";
//  option (entity.feature.api.method.http_rule) = {
//    post: "/{HttpRoot}",
//    body: "*"
//  };
//  option (entity.feature.api.method.key_field_behavior) = OUTPUT_ONLY;
//}

//message SaveListCreateOnly {
//  option (entity.feature.api.method.name) = "Save{EntityTypeName}List";
//  option (entity.feature.api.method.request_name) = "Save{EntityTypeName}ListRequest";
//  option (entity.feature.api.method.response_name) = "Save{EntityTypeName}ListResponse";
//  option (entity.feature.api.method.http_rule) = {
//    post: "/{HttpRoot}/list",
//    body: "*"
//  };
//  option (entity.feature.api.method.key_field_behavior) = OUTPUT_ONLY;
//}
//

//message EditById {
//  option (entity.feature.api.method.name) = "Edit{EntityTypeName}";
//  option (entity.feature.api.method.request_name) = "Edit{EntityTypeName}Request";
//  option (entity.feature.api.method.response_name) = "Edit{EntityTypeName}Response";
//  option (entity.feature.api.method.http_rule) = {
//    patch: "/{HttpRoot}/{KeyFields}",
//    body: "data"
//  };
//  option (entity.feature.api.method.key_field_behavior) = REQUIRED;
//  // Определение ключевых полей сущности для использования в методе
//  // Переопределяет key_fields сервиса
//  entity.feature.KeyFieldsDefinition key_fields_definition = 1;
//}

//message Edit {
//  option (entity.feature.api.method.name) = "Edit{EntityTypeName}";
//  option (entity.feature.api.method.request_name) = "Edit{EntityTypeName}Request";
//  option (entity.feature.api.method.response_name) = "Edit{EntityTypeName}Response";
//  option (entity.feature.api.method.http_rule) = {
//    patch: "/{HttpRoot}",
//    body: "data"
//  };
//  option (entity.feature.api.method.key_field_behavior) = FIELD_BEHAVIOR_UNSPECIFIED;
//}

//message EditList {
//  option (entity.feature.api.method.name) = "Edit{EntityTypeName}List";
//  option (entity.feature.api.method.request_name) = "Edit{EntityTypeName}ListRequest";
//  option (entity.feature.api.method.response_name) = "Edit{EntityTypeName}ListResponse";
//  option (entity.feature.api.method.http_rule) = {
//    patch: "/{HttpRoot}/list",
//    body: "data"
//  };
//  option (entity.feature.api.method.key_field_behavior) = REQUIRED;
//}


message DeleteById {
  entity.feature.api.method.OverrideAttributes override_attributes = 1;
  entity.feature.api.method.Attributes attributes = 2;
  dto.RequestTemplate request_template = 3;
  dto.ResponseTemplate response_template = 4;
  entity.feature.api.method.Variables variables = 5;
}

message RestoreById {
  entity.feature.api.method.OverrideAttributes override_attributes = 1;
  entity.feature.api.method.Attributes attributes = 2;
  dto.RequestTemplate request_template = 3;
  dto.ResponseTemplate response_template = 4;
  entity.feature.api.method.Variables variables = 5;
}

//message Delete {
//
//  option (entity.feature.api.method.name) = "Delete{EntityTypeName}";
//  option (entity.feature.api.method.request_name) = "Delete{EntityTypeName}Request";
//  option (entity.feature.api.method.response_name) = "Delete{EntityTypeName}Response";
//  option (entity.feature.api.method.http_rule) = {
//    delete: "/{HttpRoot}"
//  };
//  option (entity.feature.api.method.key_field_behavior) = FIELD_BEHAVIOR_UNSPECIFIED;
//}
//
//message DeleteList {
//
//  option (entity.feature.api.method.name) = "Delete{EntityTypeName}List";
//  option (entity.feature.api.method.request_name) = "Delete{EntityTypeName}ListRequest";
//  option (entity.feature.api.method.response_name) = "Delete{EntityTypeName}ListResponse";
//  option (entity.feature.api.method.http_rule) = {
//    delete: "/{HttpRoot}"
//  };
//  option (entity.feature.api.method.key_field_behavior) = FIELD_BEHAVIOR_UNSPECIFIED;
//}

message GetById {
  entity.feature.api.method.OverrideAttributes override_attributes = 1;
  entity.feature.api.method.Attributes attributes = 2;
  dto.RequestTemplate request_template = 3;
  dto.ResponseTemplate response_template = 4;
  entity.feature.api.method.Variables variables = 5;
}

message GetByIdScope {
  entity.feature.api.method.OverrideAttributes override_attributes = 1;
  entity.feature.api.method.Attributes attributes = 2;
  dto.RequestTemplate request_template = 3;
  dto.ResponseTemplate response_template = 4;
  entity.feature.api.method.Variables variables = 5;
}
//
//message Get {
//  option (entity.feature.api.method.name) = "Get{EntityTypeName}";
//  option (entity.feature.api.method.request_name) = "Get{EntityTypeName}Request";
//  option (entity.feature.api.method.response_name) = "Get{EntityTypeName}Response";
//  option (entity.feature.api.method.http_rule) = {
//    get: "/{HttpRoot}"
//  };
//  option (entity.feature.api.method.key_field_behavior) = FIELD_BEHAVIOR_UNSPECIFIED;
//  entity.feature.api.method.Comments comments = 1;
//  entity.feature.api.method.Attributes attributes = 2;
//  dto.RequestTemplate request_template = 3;
//  dto.ResponseTemplate response_template = 4;
//}

message GetList {
  entity.feature.api.method.OverrideAttributes override_attributes = 1;
  entity.feature.api.method.Attributes attributes = 2;
  dto.RequestTemplate request_template = 3;
  dto.ResponseTemplate response_template = 4;
  entity.feature.api.method.Variables variables = 5;
}

message GetListScope {
  entity.feature.api.method.OverrideAttributes override_attributes = 1;
  entity.feature.api.method.Attributes attributes = 2;
  dto.RequestTemplate request_template = 3;
  dto.ResponseTemplate response_template = 4;
  entity.feature.api.method.Variables variables = 5;
}

message GetCount {
  entity.feature.api.method.OverrideAttributes override_attributes = 1;
  entity.feature.api.method.Attributes attributes = 2;
  dto.RequestTemplate request_template = 3;
  dto.ResponseTemplate response_template = 4;
  entity.feature.api.method.Variables variables = 5;
}

message GetCountScope {
  entity.feature.api.method.OverrideAttributes override_attributes = 1;
  entity.feature.api.method.Attributes attributes = 2;
  dto.RequestTemplate request_template = 3;
  dto.ResponseTemplate response_template = 4;
  entity.feature.api.method.Variables variables = 5;
}

// TODO: в extension  Exists

// TODO: в extension ExistsKey

// TODO: в extension AttachList
// TODO: в extension DetachList

message Attach {
  entity.feature.api.method.OverrideAttributes override_attributes = 1;
  entity.feature.api.method.Attributes attributes = 2;
  dto.RequestTemplate request_template = 3;
  dto.ResponseTemplate response_template = 4;
  entity.feature.api.method.Variables variables = 5;
}

message Detach {
  entity.feature.api.method.OverrideAttributes override_attributes = 1;
  entity.feature.api.method.Attributes attributes = 2;
  dto.RequestTemplate request_template = 3;
  dto.ResponseTemplate response_template = 4;
  entity.feature.api.method.Variables variables = 5;
}

message GetLinkList {
  entity.feature.api.method.OverrideAttributes override_attributes = 1;
  entity.feature.api.method.Attributes attributes = 2;
  dto.RequestTemplate request_template = 3;
  dto.ResponseTemplate response_template = 4;
  entity.feature.api.method.Variables variables = 5;
}

message GetLinkCount {
  entity.feature.api.method.OverrideAttributes override_attributes = 1;
  entity.feature.api.method.Attributes attributes = 2;
  dto.RequestTemplate request_template = 3;
  dto.ResponseTemplate response_template = 4;
  entity.feature.api.method.Variables variables = 5;
}


