Проект инструментальной обвязки сущностей, определенных в формате `.proto` файлов

# Entity Feature API Generator

Генератор API-спецификаций Protocol Buffers (`.proto` файлов) на основе кастомных опций, определенных непосредственно в ваших сущностях (message).

Этот инструмент позволяет сгенерировать API для конкретной сущности, прямо в `.proto` файле этой сущности, используя шаблоны и переопределяемые атрибуты шаблонов. 
Это значительно упрощает и автоматизирует процесс создания boilerplate кода для CRUD и других стандартных операций.

Позволяет определить концепцию АПИ в шаблонах и снизить вероятность нарушения концепции. В то же время не ограничивает произвольные изменения АПИ.

## Особенности

*   **Декларативное определение API**: Описывайте желаемый API внутри вашего `.proto` файла с помощью кастомных опций (`entity.feature.api.specification`).
*   **Шаблоны**: Создавайте переиспользуемые шаблоны, содержащие унифицированную концепцию АПИ для сервисов (например, стандартный CRUD) и сообщений (DTO).
*   **Гибкая настройка**: Переопределяйте атрибуты из шаблонов непосредственно в описании сущности.
*   **Автоматическая генерация**:
*   Сообщений запросов и ответов (DTO) на основе шаблонов.
*   Сервисов и методов.
*   Ключевых полей: Автоматически подставляйте ключевые поля вашей сущности в шаблоны.
*   Комментариев: Поддержка шаблонов в комментариях (например, `{EntityTypeName}`).
*   HTTP аннотаций: (Опционально) Генерация `google.api.http` опций для gRPC-Gateway/Connect.
*   **Чистый вывод**: Сгенерированные `.proto` файлы не содержат служебных опций (`entity.feature.*`).

## Как это работает

1.  **Определяете сущность**: Создаете обычный `.proto` файл с вашей сущностью (например, `User`).
2.  **Применяете спецификацию**: Добавляете к сущности опцию `option (entity.feature.api_specification) = { ... }`.
3.  **Настраиваете спецификацию**:
*   Указываете, какой шаблон сервиса использовать (например, `CrudServiceTemplate`).
*   Переопределяете атрибуты шаблона (имя сервиса, HTTP путь, методы и т.д.).
*   Определяете ключевые поля сущности (или используете группу уникальных полей).
4.  **Запускаете генератор**: Инструмент анализирует ваши `.proto` файлы.
5.  **Получаете результат**: Генератор создает новые `.proto` файлы, содержащие определения сервисов, сообщений и методов, полностью соответствующие вашей спецификации.

Подробнее смотрите в примерах 
*   [test_proto](test_proto) определение сущностей с указанием нужной спецификации АПИ
*   [test_assert](test_assert) результаты генерации
*   [impl](impl) реализации концепции АПИ в шаблонах
*   [proto_deps/entity_feature](proto_deps/entity_feature) структуры для описания шаблонов

## Использование

### Тест
    go test . -v
### Запуск в контейнере
    docker compose up --build app
### Локальный запуск
    go mod download
    go build -v -o ./ ./...
    cmd.exe /C "set PROTO_PATH=templates& set PROTO_OUT_PATH=gen_out& set PROTO_IMPORT_PATH=.;proto_deps& entity-house"

Будут взяты описания сущностей из [templates](templates) и сгенерированы спецификации в [gen_out](gen_out)